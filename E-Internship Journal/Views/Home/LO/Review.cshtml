@{
    ViewData["Title"] = "Review Page";
}
<div class="container-fluid">
    <!-- Breadcrumbs-->
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="~/Home/Index">Homepage</a>
        </li>
        <li class="breadcrumb-item active">Review</li>
    </ol>
    <div class="card" style="border-width:0px;">
        <div class="card-body">
            <div class="form-group">
                <div class="pull-left">
                    <label>Student Name:&nbsp</label><select class="form-control" id="selectstudent">
                    </select>
                </div>
                <div class="col-xs-12 pull-right">
                    <label>View By:&nbsp</label>
                    <select class="form-control" id="selectWeek">

                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" href="#attendance" role="tab" data-toggle="tab">Attendance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#reflection" role="tab" data-toggle="tab">Reflection</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#task" role="tab" data-toggle="tab">Daily Task</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#competency" role="tab" data-toggle="tab">Competency Checklist</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#mentoring" role="tab" data-toggle="tab">Mentoring</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#grading" role="tab" data-toggle="tab">Grading</a>
                </li>
            </ul>
        </div>
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="attendance">
                <div class="container text-left">
                    <br />
                    <div>
                        <h5>Attendance</h5>
                    </div>
                    <hr />
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered" id="dataTable_attendance" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Time in</th>
                                        <th>Time Out</th>
                                        <th>Remarks</th>
                                        <th width="5%">Comments</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <br />
                    <div>
                        <h5>Attendance Overall</h5>
                    </div>
                    <hr />
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered" id="dataTableAttendanceOverall" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>Public Holidays</th>
                                        <th>MCs</th>
                                        <th>Company Off-Day</th>
                                        <th>Leave of Absence</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div>
                            <form class="form-inline">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Total no. of days required:</label>
                                    <div class="col-sm-10">
                                        <input class="form-control" id="requiredDays" type="text" value="80" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">No. of working days:</label>
                                    <div class="col-sm-10">
                                        <input class="form-control" id="doneDays" type="text" value="-" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="reflection">
                <div class="container text-left">
                    <br />
                    <div>
                        <h5>Soft Skill Competency</h5>
                    </div>
                    <hr />
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <p>In terms of workplace knowledge, communication and interpersonal skills, reflect on:</p>
                    </div>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group">
                            <label class="control-label col-sm-8 requiredField" for="softskill1">(a) Areas you have done well.</label>
                            <textarea class="form-control" rows="5" id="softskill1" readonly></textarea>
                        </div>
                    </div>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group">
                            <label class="control-label col-sm-8 requiredField" for="softskill2">(b) Areas you would like to improve.</label>
                            <textarea class="form-control" rows="5" id="softskill2" readonly></textarea>
                        </div>
                    </div>
                    <br />
                    <div>
                        <h5>Technical Competency</h5>
                    </div>
                    <hr>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <p>Reflect on:</p>
                    </div>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group">
                            <label class="control-label col-sm-8 requiredField" for="hardskill1">(a) How you have applied what you have learnt in school and workplace</label>
                            <textarea class="form-control" rows="5" id="hardskill1" readonly></textarea>
                        </div>
                    </div>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group">
                            <label class="control-label col-sm-8 requiredField" for="hardskill2">(b) Areas you have done well.</label>
                            <textarea class="form-control" rows="5" id="hardskill2" readonly></textarea>
                        </div>
                    </div>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group ">
                            <label class="control-label col-sm-8 requiredField" for="hardskill3">(c) Areas you would like to improve.</label>
                            <textarea class="form-control" rows="5" id="hardskill3" readonly></textarea>
                        </div>
                    </div>
                    <br />
                    <div>
                        <h5>Feedback</h5>
                    </div>
                    <hr>
                    <div class="col-md-10 col-sm-10 col-xs-12">
                        <div class="form-group">
                            <label class="control-label col-sm-3 requiredField" for="reflectionfeedback">Overall Comments:</label>
                            <textarea class="form-control" rows="5" id="reflectionfeedback" readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="task">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable_task" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <th width="10%">Date</th>
                                    <th>Task Recorded</th>
                                    <th width="5%">Remarks</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="competency">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="tablecompetency" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>A. Domain Immersation</th>
                                    <th>Tick if performed</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        1. Describe and explain respectively domain knowledge
                                        <ul>
                                            <li>
                                                Understand existing business operations
                                            </li>
                                            <li>
                                                Identify roles and responsibilities of company staff members
                                            </li>
                                            <li>
                                                Understand a project/system business requirements
                                            </li>
                                        </ul>
                                    </td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ1" id="q1" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th>B. Project/System Analysis & Design</th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>
                                        2. Participate and contribute to the review, analysis and verification of business and software requirements
                                        <ul>
                                            <li>
                                                Assist project team for project requirements gathering and analysis
                                            </li>
                                            <li>
                                                Assist in gathering of user requirements, which can be any activity such as design of questionnaire, logistics planning
                                            </li>
                                            <li>
                                                Identify and document an application problem or symptoms from users(when there is reported software bug)
                                            </li>
                                            <li>
                                                Propose solutions to an application problem with designated supervisors or mentors
                                            </li>
                                        </ul>
                                    </td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ2" id="q2" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        3. Prepare technical documentation and reports on requirements and analysis
                                        <ul>
                                            <li>
                                                Report the workflow of a business requirement, in the form of UML(Sequence, State etc. diagrams) or any in company standard documentation format
                                            </li>
                                            <li>
                                                Report or present a problem resolution/design to the users
                                            </li>
                                            <li>
                                                Document constraints or possible impacts in the application, during any code or functionality changes from bugfix or change request
                                            </li>
                                            <li>
                                                Perform an impact analysis (i.e. what could happen to the users, like loss of what data) of the risks involved in the reported application problem/error
                                            </li>
                                        </ul>
                                    </td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ3" id="q3" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>b. Discuss with the student on the internship requirements. (This is recommended to be carried out at the start of the inrernship)</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ4" id="q4" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>c. Guide the student to meet requirements and learning objectives. This includes guiding the student on the tasks, setting performance expectations and encouraging student to ask questions to clarify job resposibilities.</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ5" id="q5" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>d. Provide periodic feedback to student on his/her performance</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ6" id="q6" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>e. Meet and discuss with the SP Liaison Officer on student's progress and performance during company visits.</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ7" id="q7" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>f. Provide final assessment on student's performance</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkbox8" id="q8" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th>3. Mentorship</th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>a. Provide student an overview of the company structure, nature of business and work requirements.</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ9" id="q9" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>b. Share about job propects, career paths and trends within the industry. This can be done through sharing of work experience, relevant resources, networking contacts, as appropriate.</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ10" id="q10" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>b. Motivate the student with your work experience and career journey in the industry. This includes, but not limited to, providing the student and understanding on the right kind of professional and personal ethics, attiudes and values to adopt to be effective</td>
                                    <td>
                                        <div class="checkbox">
                                            <input type="checkbox" name="checkboxQ11" id="q11" />
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="mentoring" class="tab-pane fade">
                <div class="container">
                    <br />
                    <div class="text-left">
                        <h5>Mentoring Detail</h5>
                    </div>
                    <hr />
                    <div class="col-12">
                        <div class="col-6 pull-left">
                            <div class="form-group">
                                <label for="exampleFormControlSelect1">Session #</label>
                                <select class="form-control" id="MentorSessionNumber" disabled>

                                </select>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="date">
                                    Session Date
                                </label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar">
                                        </i>
                                    </div>
                                    <input class="form-control" id="MentorSessionDate" name="date" placeholder="DD/MM/YYYY" type="text" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="timein">
                                    Time started
                                </label>
                                <div class='input-group date' id='timein'>
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>

                                    <input type='text' class="form-control" id="MentorSessionDateTimeStart" readonly />
                                </div>
                            </div>
                        </div>
                        <div class="col-6 pull-right">
                            <div class="form-group">
                                <label class="control-label" for="timeout">
                                    Time ended
                                </label>
                                <div class='input-group date' id='timeout'>
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>
                                    <input type='text' class="form-control" id="MentorSessionDateTimeEnd" readonly />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label class="control-label" for="comment">Please note down what you have learnt from the mentoring session. The areas of learning may include, but not limited to, an overview of the company structure, nature of business and work requirements; jobs prospects and career paths within the industry; or work experience of your mentor in the industry</label>
                            <textarea class="form-control" rows="5" id="MentorSessionReflection" readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div id="grading" class="tab-pane fade">
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="card">
                            <div class="card-header" role="tab" id="headingOne">
                                <h5 class="mb-0">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        Rating Scale & Descriptions
                                    </a>
                                </h5>
                            </div>

                            <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
                                <ol class="card-block">
                                    <li>Does not meet expectations in the area accessed</li>
                                    <li>Generally effective in the area assessed</li>
                                    <li>Good in the area assessed</li>
                                    <li>Very good in the area assessed</li>
                                    <li>Exceeds expectations in the area assessed </li>
                                </ol>
                            </div>
                        </div>
                        <table class="table table-bordered" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>Assessment Criteria</th>
                                    <th>Rating</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="card">
                                            <div class="card-header" role="tab" id="headingTwo">
                                                <h6 class="mb-0">
                                                    <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                        1. Workplace knowlegde, communication and interpersonal skills encompass the following areas
                                                    </a>
                                                </h6>
                                            </div>
                                            <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
                                                <ul class="card-block">
                                                    <li>Plans and organises assigned work.</li>
                                                    <li>Communicates effectively in verbal and/or written communcation.</li>
                                                    <li>Maintains good attendance punctuality.</li>
                                                    <li>Demonstrates commitment, motivation and reliability towards work assignment.</li>
                                                    <li>Able to work effectively with others towards the accomplishment of common goals.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <select class="form-control" id="CommunicationGrading" disabled>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="card">
                                            <div class="card-header" role="tab" id="headingThree">
                                                <h6 class="mb-0">
                                                    <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                        2. Technical Knowledge & Skills encompass the following areas
                                                    </a>
                                                </h6>
                                            </div>
                                            <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
                                                <ul class="card-block">
                                                    <li>Able to apply relevant skills effectively and proficiently.</li>
                                                    <li>Able to produce quality work in accordance with schedules and timelines.</li>
                                                    <li>Is resourceful and can act and respond independently or with minimal guidance.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <select class="form-control" id="TechnicalGrading" disabled>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="card">
                                            <div class="card-header" role="tab" id="headingFour">
                                                <h6 class="mb-0">
                                                    <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
                                                        3. Independent learning skills encompass the following areas
                                                    </a>
                                                </h6>
                                            </div>
                                            <div id="collapseFour" class="collapse" role="tabpanel" aria-labelledby="headingFour">
                                                <ul class="card-block">
                                                    <li>Able to acquire new skills and apply knowledge learnt.</li>
                                                    <li>Is resorceful and able to resolve problem when challenges are encountered</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <select class="form-control" id="IndependenceGrading" disabled>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="card">
                                            <div class="card-header" role="tab" id="headingFive">
                                                <h6 class="mb-0">
                                                    <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseThree">
                                                        4. Overall Performance
                                                    </a>
                                                </h6>
                                            </div>
                                            <div id="collapseFive" class="collapse" role="tabpanel" aria-labelledby="headingFive">
                                                <ul class="card-block">
                                                    <li>I am satisfied with the overall performance and contributions of this stdent</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <select class="form-control" id="PerformanceGrading" disabled>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="card">
                            <div class="card-header" role="tab" id="headingFive">
                                <h6 class="mb-0">
                                    <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseThree">
                                        Average rating to overall grade
                                    </a>
                                </h6>
                            </div>
                            <div id="collapseSix" class="collapse" role="tabpanel" aria-labelledby="headingFive">
                                <ul class="card-block">
                                    <li>Higher or equal to 4.5 -- Distinction</li>
                                    <li>Higher or equal to 4.0 -- A (Excellent)</li>
                                    <li>Higher or equal to 3.5 -- B+ (Very good)</li>
                                    <li>Higher or equal to 3.0 -- B (Good)</li>
                                    <li>Higher or equal to 2.5 -- C+ (Good Credit)</li>
                                    <li>Higher or equal to 2.0 -- C (Credit)</li>
                                    <li>Higher or equal to 1.5 -- D (Pass)</li>
                                    <li>Less than 1.5 -- F (Fail)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-8 control-label">Average rating based on the above four assessment criteria:</label>
                            <div class="col-sm-5">
                                <input class="form-control" id="OverallGrading" type="text" value="" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Overall Grade:</label>
                            <div class="col-sm-5">
                                <input class="form-control" id="OverallGrade" type="text" value="" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-3" for="OverallFeedback">Overall Comments:</label>
                            <textarea class="form-control" rows="5" id="OverallFeedback" readonly></textarea>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="card-body">
    <div class="form-group">
        <div class="col-12">
            <button class="btn btn-default pull-left" onclick="location.href='http://' + window.location.host +'/Home/Index'">
                Back
            </button>
        </div>
    </div>
</div>
&nbsp;
<!-- comment Modal -->
<div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="attendanceModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="attendanceModalLabel"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="container">
                    <form>
                        <div class="form-group ">
                            <label>Comment:</label>
                            <textarea class="form-control" rows="5" id="reviewtask" readonly>Went to meeting, and prepared meeting report.</textarea>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

        var monthRecords;
        var cookies = document.cookie.split("; ");

        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i];
            var eqPos = cookie.indexOf("=");
            var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
            //console.dir(getCookie(name));
            var cookievalue = getCookie(name);

            if (name != "selectedStudent") {
                $studentInputElement = $('#selectstudent');
                $optionElement = $('<option>').text(name).attr('value', cookievalue);
                $studentInputElement.append($optionElement);

            } else {
                $('#selectstudent').val(cookievalue);
                $('#studentId').text(cookievalue);

            }
        }//End of for loop
        g_getLocalStorage = sessionStorage.getItem($('#selectstudent').val());
        monthRecords = getMonthlyReview(g_getLocalStorage);

    
        //$('#dataTable tbody').on('click', 'button.btn-primary', function (e) {
        //    $('#commentModal').modal('show');
        //});

        //$('#addattendance').on('click', function (e) {
        //    $('#attendanceModal').modal('show');
        //});
        $("#tablecompetency input").attr("disabled", "disabled"); //disable input for table competency

        $('#selectstudent').on('change', function (e) {
            setCookie();
            g_getLocalStorage = sessionStorage.getItem($('#selectstudent').val());
            monthRecords = getMonthlyReview(g_getLocalStorage);

        });
        $('#selectWeek').on('change', function (e) {
            g_getLocalStorage = sessionStorage.getItem($('#selectstudent').val());
            selectedWeek();
        });
    function getCookie(name) {
        var dc = document.cookie;
        var prefix = name + "=";
        var begin = dc.indexOf("; " + prefix);
        if (begin == -1) {
            begin = dc.indexOf(prefix);
            if (begin != 0) return null;
        } else {
            begin += 2;
        }
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
            end = dc.length;
        }
        return unescape(dc.substring(begin + prefix.length, end));
    }

    function setCookie() {
        var inName = "selectedStudent";
        var inValue = $('#selectstudent').val();
        //setCookie("selectedStudent", ("#selectstudent").val());
        var exdate = new Date();
        var expiredays = 1;
        exdate.setHours(exdate.getHours() + 4);
        exdate.setDate(exdate.getDate());
        document.cookie = inName + "=" + inValue + ";path=/" + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString());
    }
    function getMonthlyReview(inStudentId) {
        return $.ajax({
            url: '/api/month_record/ReviewInternshipMonth/' + inStudentId,
            method: 'GET',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            cache: false,
            success: function (data) {
                $('#selectWeek').find('option').remove();
                for (i = 0; i < data.length; i++) {
                    var selectMonthRecord
                    var newOption = $('<option>').text('Week ' + (((i + 1) * 4) - 3) + ' to Week ' + (i + 1) * 4).val(i);
                    $('#selectWeek').append(newOption);
                }
               
                selectedWeek();
            },//End of success
            error: function (data) {
                swal({
                    type: 'error',
                    title: 'Error',
                    text: data.Message
                });
            }//End of error
        });//End of ajax call

    }//end of getReflectionHistory function
    function selectedWeek() {
        monthRecords.then(function (data) {
            var selectedWeek = $('#selectWeek').val();
            $('#dataTable').dataTable().fnClearTable();
            loadDataTable(data[selectedWeek]);


        })
       
    }
    function loadDataTable(inFinalData) {
        //var tt = inFinalData[0].AttendanceRecords;
        var attendancetable = $('#dataTable_attendance').DataTable({
            dom: "<'row'<'col-sm-12'tr>>" +
            "<'row'<'col-sm-4'l><'col-sm-8'p>>",
            destroy: true,
            data: inFinalData.AttendanceRecords,
            columns: [
                {
                    data: "Date",
                    mRender: function (o) { return moment(o).format("DD/MM/YYYY") }
                }, {
                    data: "ArrivalTime",
                    mRender: function (o) { return moment(o).format("h:mm A") }

                }, {
                    data: "DepartureTime",
                    mRender: function (o) { return moment(o).format("h:mm A") }

                }, {
                    data: "Remarks"

                }, {
                    //data: "TaskRecordId",
                    "bSortable": false,
                    "mRender": function (data, type, row) {
                        var button = row.SupervisorRemarks == "" ? '<button class="btn btn-sm btn-danger" disabled>No Remarks</button>' : '<button class="btn btn-sm btn-primary" value="' + row.DayId + '">View</button>'
                        return button;
                    } //note under condition if no remarks was given the column would be blank
                }
            ],
            language: {
                emptyTable: "No Task was found, please create one.",
            }
        });


        var g_table = $('#dataTable_task').DataTable({
            dom: "<'row'<'col-sm-12'tr>>" +
            "<'row'<'col-sm-4'l><'col-sm-8'p>>",
            destroy: true,
            data: inFinalData.TaskRecords,
            columns: [
                {
                    data: "Date",
                    "mRender": function (o) { return moment(o).format("DD/MM/YYYY") },
                },
                { data: "Description" },
                {
                    //data: "TaskRecordId",
                    "bSortable": false,
                    "mRender": function (data, type, row) {
                        var button = row.TaskRemarks == "" ? '<button class="btn btn-sm btn-danger" disabled>No Remarks</button>' : '<button class="btn btn-sm btn-primary" value="' + row.TaskRecordId + '">View</button>'
                        return button;
                    } //note under condition if no remarks was given the column would be blank
                }
            ],
            language: {
                emptyTable: "No Task was found, please create one.",
            }
        });//End of DataTable

        $('#dataTable_task tbody').off('click');
        $('#dataTable_attendance tbody').off('click');
        $('#dataTable_task tbody').on('click', 'button.btn-primary', function (e) {
            var selected = $(this).val();
            monthRecords.then(function (data) {
                var task = data[$('#selectWeek').val()];
                for (i = 0; i < task.TaskRecords.length; i++) {
                    if (task.TaskRecords[i].TaskRecordId == selected) {
                        $('#attendanceModalLabel').text(moment(task.TaskRecords[i].Date).format("DD MMMM YYYY"));
                        $('#reviewtask').val(task.TaskRecords[i].TaskRemarks);

                    }

                }
                $('#commentModal').modal('show');
            });
        });
    //End of Task script

        $('#dataTable_attendance tbody').on('click', 'button.btn-primary', function (e) {
            var selected = $(this).val();
            monthRecords.then(function (data) {
                var task = data[$('#selectWeek').val()];
                for (i = 0; i < task.AttendanceRecords.length; i++) {
                    if (task.AttendanceRecords[i].DayId == selected) {
                        $('#attendanceModalLabel').text(moment(task.AttendanceRecords[i].Date).format("DD MMMM YYYY"));
                        $('#reviewtask').val(task.AttendanceRecords[i].SupervisorRemarks);

                    }

                }
                $('#commentModal').modal('show');
            });
        });
        //end of attendance script
        $('#softskill1').val(inFinalData.SoftSkillsCompetencyDoneWell);
        $('#softskill2').val(inFinalData.SoftSkillsCompetencyImprove);
        $('#hardskill1').val(inFinalData.TechnicalCompetencyApplied);
        $('#hardskill2').val(inFinalData.TechnicalCompetencyDoneWell);
        $('#hardskill3').val(inFinalData.TechnicalCompetencyImprove);
        $("#MentorSessionNumber option").remove();
        var newOption = $('<option>').text(parseInt($('#selectWeek option:selected').index()) + 1).val(parseInt($('#selectWeek option:selected').index()) + 1);
        $('#MentorSessionNumber').append(newOption);

        inFinalData.MentorSessionDateTimeStart == null ? $('#MentorSessionDate').val("") : $('#MentorSessionDate').val(moment(new Date(inFinalData.MentorSessionDateTimeStart)).format('DD/MM/YYYY'));
        inFinalData.MentorSessionDateTimeStart == null ? $('#MentorSessionDateTimeStart').val("") : $('#MentorSessionDateTimeStart').val(moment(new Date(inFinalData.MentorSessionDateTimeStart)).format('hh:mm A'));
        inFinalData.MentorSessionDateTimeEnd == null ? $('#MentorSessionDateTimeEnd').val("") : $('#MentorSessionDateTimeEnd').val(moment(new Date(inFinalData.MentorSessionDateTimeEnd)).format('hh:mm A'));
        $('#MentorSessionReflection').val(inFinalData.MentorSessionReflection);
        $('#CommunicationGrading').val(inFinalData.CommunicationGrading);        $('#TechnicalGrading').val(inFinalData.TechnicalGrading);        $('#IndependenceGrading').val(inFinalData.IndependenceGrading);        $('#PerformanceGrading').val(inFinalData.PerformanceGrading);        $('#OverallGrading').val(inFinalData.OverallGrading);
        if (inFinalData.Approved) {
            $('#OverallGrade').val(getGrade(inFinalData.OverallGrading));
        } else {
            $('#OverallGrade').val("Not Graded Yet");
        }
        $('#OverallFeedback').val(inFinalData.OverallFeedback);


        $('#tablecompetency').empty();
        var competencyTable = $('#tablecompetency');
        for (i = 0; i < inFinalData.ListOfCompetency.length; i++) {
            
            var dataForCompetencyList = inFinalData.ListOfCompetency[i].CompetencyList.sort(function (a, b) { return (a.ViewBy > b.ViewBy) ? 1 : ((b.ViewBy > a.ViewBy) ? -1 : 0); });
            $threadElement = $('<thead></thead>');
            $rowElement = $('<tr></tr>');
            $cellElement = $('<th></th>', { text: inFinalData.ListOfCompetency[i].ViewBy + ". " + inFinalData.ListOfCompetency[i].TitleCompetency }).attr('title', inFinalData.ListOfCompetency[i].TitleCompetency).attr('colspan', '2');
            $rowElement.append($cellElement);

            $threadElement.append($rowElement);
            competencyTable.append($threadElement);

            $tbodyElement = $('<tbody></tbody>')
            for (k = 0; k < dataForCompetencyList.length; k++) {

                $rowElement = $('<tr></tr>');
                $cellElement = $('<td></td>');
                //$cellElement = $('<td></td>', { text: data[i].CompetencyList[k].Description });
                $cellElement.html(dataForCompetencyList[k].Description);
                $rowElement.append($cellElement);

                $cellElement = $('<td style="text-align:center; vertical-align:center;"><input name="CompetencyCheck" type="checkbox"  disabled value="' + dataForCompetencyList[k].CompetencyId + '"></td>');
                $rowElement.append($cellElement);

                $tbodyElement.append($rowElement);
                //   $threadElement.append($tbodyElement);
                competencyTable.append($tbodyElement);
            }
        }//End of List competency For Loop
   
        $("input[name='CompetencyCheck']").each(function () {
            if (inFinalData.CompetencyCheckeds.length > 0) {
                for (i = 0; i < inFinalData.CompetencyCheckeds.length; i++) {
                    var ccid = inFinalData.CompetencyCheckeds[i].CompetencyId;
                    if ($(this).val() == ccid) {
                        $(this).prop('checked', true);
                    } else {
                        $(this).prop('checked', false);
                    }
                }
            } else {
                $(this).prop('checked', false);
            }
        });
    }//End of functon LoadDataTable
  
    function getGrade(average) {
        console.dir(average);
        if (average >= 4.5)
            return 'DIST';
        else if (average >= 4.0)
            return 'A';
        else if (average >= 3.5)
            return 'B+';
        else if (average >= 3.0)
            return 'B';
        else if (average >= 2.5)
            return 'C+';
        else if (average >= 2.0)
            return 'C';
        else if (average >= 1.5)
            return 'D';
        else if (average < 1.5)
            return 'F';
    }
</script>
